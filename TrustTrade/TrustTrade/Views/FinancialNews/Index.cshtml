@model IEnumerable<TrustTrade.Models.FinancialNewsItem>
@{
    ViewData["Title"] = "Financial News";
}

<div class="financial-news-page">
    <div class="page-header">
        <h1>Financial News</h1>
        <p class="text-muted">Stay updated with the latest market news and insights</p>
    </div>
    
    <div class="filter-controls">
        <div class="category-tabs">
            <a href="@Url.Action("Index", "FinancialNews")" class="btn @(ViewBag.CurrentCategory == null ? "btn-primary" : "btn-outline-primary")">All</a>
            <a href="@Url.Action("Index", "FinancialNews", new { category = "Stock" })" class="btn @(ViewBag.CurrentCategory == "Stock" ? "btn-primary" : "btn-outline-primary")">Stocks</a>
            <a href="@Url.Action("Index", "FinancialNews", new { category = "Crypto" })" class="btn @(ViewBag.CurrentCategory == "Crypto" ? "btn-primary" : "btn-outline-primary")">Crypto</a>
        </div>
    </div>
    
    <div class="news-container">
        @if (Model.Any())
        {
            foreach (var newsItem in Model)
            {
                <div class="news-card">
                    <div class="news-metadata">
                        <span class="news-source">@newsItem.Source</span>
                        <span class="news-date">@newsItem.TimePublished.ToString("MMM dd, yyyy HH:mm")</span>
                    </div>
                    
                    <h3 class="news-title">
                        <a href="@newsItem.Url" target="_blank" rel="noopener noreferrer">@newsItem.Title</a>
                    </h3>
                    
                    @if (!string.IsNullOrEmpty(newsItem.Summary))
                    {
                        <p class="news-summary">@newsItem.Summary</p>
                    }
                    
                    <div class="news-footer">
                        <div class="sentiment-section">
                            @if (!string.IsNullOrEmpty(newsItem.OverallSentimentLabel))
                            {
                                <div class="sentiment-badge @newsItem.OverallSentimentLabel.ToLower().Replace(" ", "-")">
                                    <i class="fas @(newsItem.OverallSentimentLabel.Contains("Bullish") ? "fa-arrow-up" : 
                                                 newsItem.OverallSentimentLabel.Contains("Bearish") ? "fa-arrow-down" : "fa-minus")"></i>
                                    @newsItem.OverallSentimentLabel
                                </div>
                            }
                        </div>
                        
                        @if (newsItem.TickerSentiments != null && newsItem.TickerSentiments.Any())
                        {
                            <div class="tickers-section">
                                <span class="tickers-label">Related:</span>
                                @foreach (var ticker in newsItem.TickerSentiments.OrderByDescending(t => t.RelevanceScore).Take(5))
                                {
                                    <span class="ticker-badge @ticker.TickerSentimentLabel?.ToLower().Replace(" ", "-")">
                                        $@ticker.TickerSymbol
                                    </span>
                                }
                            </div>
                        }
                        
                        @if (newsItem.Topics != null && newsItem.Topics.Any())
                        {
                            <div class="topics-section">
                                <span class="topics-label">Topics:</span>
                                @foreach (var topic in newsItem.Topics.OrderByDescending(t => t.RelevanceScore).Take(3))
                                {
                                    <span class="topic-badge">@topic.TopicName</span>
                                }
                            </div>
                        }
                    </div>
                </div>
            }
        }
        else
        {
            <div class="no-news-message">
                <i class="fas fa-newspaper fa-3x"></i>
                <h3>No financial news available</h3>
                <p>Check back later for the latest updates on stocks and cryptocurrencies.</p>
            </div>
        }
    </div>
</div>